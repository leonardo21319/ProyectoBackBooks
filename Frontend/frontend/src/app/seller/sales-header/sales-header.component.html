<!-- src/app/shared/sales-header/sales-header.component.html -->
<header
  class="sales-header sticky-top"
  (click)="closeDropdownOnOutsideClick($event)"
>
  <div class="container-fluid">
    <div class="row align-items-center py-3">
      <!-- Logo con distintivo de vendedor -->
      <div class="col-auto">
        <div
          class="logo-container vendor-logo"
          (click)="goToSalesHome()"
          style="cursor: pointer"
        >
          <img
            src="assets/images/logo.jpeg"
            alt="Logo Vendedor"
            class="logo-img"
            onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"
          />
          <div class="logo-placeholder" style="display: none">VENDEDOR</div>
        </div>
      </div>

      <!-- Buscador Centrado -->
      <div class="col d-flex justify-content-center">
        <div class="search-container-figma vendor-search">
          <input
            type="text"
            class="search-input-figma"
            [(ngModel)]="searchTerm"
            placeholder="Buscar en mi inventario..."
            (keyup.enter)="onSearch()"
          />
          <button class="search-btn-figma" type="button" (click)="onSearch()">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19S2 15.194 2 10.5 5.806 2 10.5 2 19 5.806 19 10.5Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
      </div>

      <!-- Navegaci√≥n para Vendedor -->
      <div class="col-auto">
        <div class="d-flex align-items-center" style="gap: 1.5rem">
          <!-- Categor√≠as con dropdown -->
          <div class="position-relative dropdown-container">
            <button
              class="nav-item-figma vendor-nav"
              (click)="toggleCategoriesDropdown($event)"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M3 7H8V12H3V7Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M13 7H18V12H13V7Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M13 17H18V22H13V17Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M3 17H8V22H3V17Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span>Categor√≠as</span>
              <svg
                width="12"
                height="12"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                [style.transform]="
                  showCategoriesDropdown ? 'rotate(180deg)' : 'rotate(0deg)'
                "
                [style.transition]="'transform 0.3s ease'"
              >
                <path
                  d="M6 9L12 15L18 9"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </button>

            <!-- Dropdown de categor√≠as -->
            <div
              class="categories-dropdown-figma"
              [class.show]="showCategoriesDropdown"
              *ngIf="showCategoriesDropdown"
            >
              <button
                class="dropdown-item-figma"
                (click)="selectCategory('Todas')"
              >
                Todas las categor√≠as
              </button>

              <button
                class="dropdown-item-figma"
                *ngFor="let category of categories"
                (click)="selectCategory(category)"
              >
                {{ category }}
              </button>
            </div>
          </div>

          <!-- Ofertas (reemplaza Guardados) -->
          <button
            class="nav-item-figma vendor-nav position-relative"
            [class.active-nav]="isActivePage('offers')"
            (click)="goToOffers()"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span>Ofertas</span>
            <span *ngIf="offersCount > 0" class="badge-figma vendor-badge-offers">{{
              offersCount
            }}</span>
          </button>

          <!-- Publicaciones (reemplaza Carrito) -->
          <button
            class="nav-item-figma vendor-nav position-relative"
            [class.active-nav]="isActivePage('publications')"
            (click)="goToPublications()"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M4 19.5C4 18.837 4.26339 18.2011 4.73223 17.7322C5.20107 17.2634 5.83696 17 6.5 17H20"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M6.5 2H20V22H6.5C5.83696 22 5.20107 21.7893 4.73223 21.2678C4.26339 20.7989 4 20.163 4 19.5V4.5C4 3.83696 4.26339 3.20107 4.73223 2.73223C5.20107 2.26339 5.83696 2 6.5 2Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M9 7H15"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M9 11H15"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span>Publicaciones</span>
            <span *ngIf="publicationsCount > 0" class="badge-figma vendor-badge-publications">{{
              publicationsCount
            }}</span>
          </button>

          <!-- Perfil de Vendedor -->
          <div class="position-relative">
            <button
              class="profile-btn-figma vendor-profile"
              [class.active-nav]="isProfileActive()"
              (click)="toggleProfileDropdown($event)"
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <circle
                  cx="12"
                  cy="7"
                  r="4"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <!-- Indicador de vendedor -->
              <div class="vendor-indicator">üìö</div>
            </button>

            <!-- Dropdown del perfil de vendedor -->
            <div
              class="profile-dropdown-figma vendor-dropdown"
              [class.show]="showProfileDropdown"
              *ngIf="showProfileDropdown"
            >
              <div class="profile-header vendor-profile-header">
                <div class="profile-avatar vendor-avatar">
                  <svg
                    width="32"
                    height="32"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <circle
                      cx="12"
                      cy="7"
                      r="4"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </div>
                <div class="vendor-label">Vendedor</div>
              </div>

              <button
                class="profile-dropdown-item"
                [class.active]="isProfileActive()"
                (click)="goToProfile()"
              >
                Mi perfil de vendedor
              </button>

              <button class="profile-dropdown-item" (click)="goToVendorOrders()">
                Historial de pedidos
              </button>

              <button class="profile-dropdown-item" (click)="goToAnalytics()">
                Anal√≠ticas y reportes
              </button>

              <button class="profile-dropdown-item" (click)="goToSettings()">
                Configuraci√≥n
              </button>

              <div class="profile-divider"></div>

              <button
                class="profile-dropdown-item logout"
                (click)="cerrarSesion()"
              >
                Cerrar sesi√≥n
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>